"use strict";(()=>{var e={};e.id=615,e.ids=[615],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},6243:(e,r,t)=>{t.r(r),t.d(r,{config:()=>g,default:()=>j,routeModule:()=>O});var a={};t.r(a),t.d(a,{default:()=>h});var i=t(1802),n=t(7153),l=t(6249);let c=require("nodemailer");var o=t.n(c);let s=require("ejs");var d=t.n(s);let u=require("path");var f=t.n(u);let m=require("moment");var P=t.n(m),v=t(3789);async function b(e,r){let t=e.body,a=o().createTransport({service:v.vz,auth:{user:v.lt,pass:v.o6}}),i={from:{name:v.D5,address:v.aT}};"flight-confirmation"==t.type&&(i.to=[...v.pV,t.travellerInformation.email],i.subject="Flight Booking Confirmation",t.flightDetails.itineraries.forEach(e=>{e.segments.forEach(e=>{e.departure.date=P()(e.departure.at).format("dddd, MMMM Do YYYY"),e.departure.time=P()(e.departure.at).format("hh:mm a"),e.arrival.date=P()(e.arrival.at).format("dddd, MMMM Do YYYY"),e.arrival.time=P()(e.arrival.at).format("hh:mm a")})}),t.travellerPriceObject.adults.totalBasePrice=t.travellerPriceObject.adults.count*t.travellerPriceObject.adults.basePrice,t.travellerPriceObject.adults.totalTaxAndFeesPrice=t.travellerPriceObject.adults.count*t.travellerPriceObject.adults.taxAndfees,t.travellerPriceObject.children.totalBasePrice=t.travellerPriceObject.children.count*t.travellerPriceObject.children.basePrice,t.travellerPriceObject.children.totalTaxAndFeesPrice=t.travellerPriceObject.children.count*t.travellerPriceObject.children.taxAndfees,t.travellerPriceObject.infants.totalBasePrice=t.travellerPriceObject.infants.count*t.travellerPriceObject.infants.basePrice,t.travellerPriceObject.infants.totalTaxAndFeesPrice=t.travellerPriceObject.infants.count*t.travellerPriceObject.infants.taxAndfees,t.bookingDate=P()(t.bookingDate).format("dddd, MMMM Do YYYY"),p(f().resolve(process.cwd(),"templates","flight_confirmation.ejs"),t,i,a,r)),"contact"==t.type&&(i.to=v.pV,i.subject="Contact Us",p(f().resolve(process.cwd(),"templates","contact-us.ejs"),t,i,a,r)),r.send("Message sent")}function p(e,r,t,a,i){d().renderFile(e,{flightDetails:r,phoneNumber:"+1 (877) 777-1662",contactEmail:"info@flyupsearch.com"},(e,r)=>{e?console.error("Error rendering EJS template:",e):(t.html=r,a.sendMail(t,(e,r)=>{e?console.error("Error in sending email: ",e):(i.status(200).send({message:"Successfully submitted the form and sent the email."}),console.log("Email sent successfully."))}))})}async function h(e,r){try{await b(e,r)}catch(e){console.error(e),r.status(500).json({error:"Failed to send email"})}}let j=(0,l.l)(a,"default"),g=(0,l.l)(a,"config"),O=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/send-mail",pathname:"/api/send-mail",bundlePath:"",filename:""},userland:a})},3789:(e,r,t)=>{t.d(r,{D5:()=>o,H9:()=>a,aT:()=>s,lt:()=>n,o6:()=>l,pV:()=>d,vz:()=>c,y:()=>i});let a="iSUCeOHkcyQEc8wKskukfQBhfozdrYQ6",i="rrQennx0PAw1JbEu",n="flyingbirdfares@gmail.com",l="dxnfjninfjnagxps",c="Gmail",o="Dazitravel",s="flyingbirdfares@gmail.com",d=["flyingbirdfares@gmail.com"]},7153:(e,r)=>{var t;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,r,t)=>{e.exports=t(145)}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=6243);module.exports=t})();